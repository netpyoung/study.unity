<!DOCTYPE HTML>
<html lang="ko" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>FMOD - 넷평의 Unity 노트</title>


        <!-- Custom HTML head -->

        <meta name="description" content="study.unity">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../../custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">넷평의 Unity 노트</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/netpyoung/study.unity" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/netpyoung/study.unity/edit/main/src/asset/audio/fmod.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="fmod"><a class="header" href="#fmod">FMOD</a></h1>
<ul>
<li>
<p><a href="https://www.fmod.com/">fmod</a></p>
<ul>
<li>FMOD는 Firelight Technologies Pty Ltd 사의 Adaptive Audio(게임 속 환경에 따라 변화하는 오디오) 처리 라이브러리</li>
<li><a href="https://www.fmod.com/licensing">licencing</a></li>
</ul>
</li>
<li>
<p><a href="https://www.slideshare.net/devcatpublications/ndc2010-fmod-4335542">장용석, fmod를이용한사운드프로그래밍, NDC2010</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/watch?v=4-nQB1qrhoE">유니티 FMOD를 통한 적응형 배경음악 만들기 - FMOD Studio로 전환하기</a></p>
</li>
<li>
<p>FMOD for Unity</p>
<ul>
<li>https://assetstore.unity.com/packages/tools/audio/fmod-for-unity-161631</li>
</ul>
</li>
<li>
<p>이벤트 기반</p>
<ul>
<li>거리별
<ul>
<li>rifle
<ul>
<li>near / mid /far</li>
</ul>
</li>
</ul>
</li>
<li>타입별
<ul>
<li>footstep
<ul>
<li>grass / stone / water / dirt / wooden</li>
</ul>
</li>
</ul>
</li>
<li>여러가지
<ul>
<li>거리 + 레이어 + 등등</li>
</ul>
</li>
</ul>
</li>
<li>
<p>트러블 슈팅</p>
<ul>
<li>거리가 가까우면 2D사운드</li>
</ul>
</li>
</ul>
<pre><code class="language-cs">EventObj event = EventSystem.GetEvent("rifle");
event.SetPosition(currentPosition);
event.Play();

EventObj event = EventSystem.GetEvent("footstep");
event.SetPosition(groundType);
event.Play();
</code></pre>
<div class="table-wrapper"><table><thead><tr><th>Legacy</th><th></th></tr></thead><tbody>
<tr><td>FMOD Ex</td><td>low level api</td></tr>
<tr><td>FMOD Event System</td><td>FMOD Ex 상위 레이어, FMOD Designer로 제작된 데이터 재생</td></tr>
<tr><td>FMOD Designer</td><td>에디터</td></tr>
</tbody></table>
</div><div class="table-wrapper"><table><thead><tr><th>탭</th><th></th></tr></thead><tbody>
<tr><td>Events</td><td>삽입된 소스로 적응형 오디오의 로직(리버브 효과, 소리 전환, BGM 루프 등)을 설계하는 곳</td></tr>
<tr><td>Banks</td><td>비슷한 성격의 Event 집합. 나중에 빌드(F7)를 통해 유니티 프로젝트와 직접적인 상호작용을 하는 곳</td></tr>
<tr><td>Assets</td><td>.wav, .ogg, .mp3 와 같은 오디오 소스 파일을 삽입하는 곳</td></tr>
</tbody></table>
</div>
<pre><code class="language-txt"># .gitignore
# https://github.com/fmod/fmod-for-unity/blob/master/.gitignore

# FMOD files
Assets/Plugins/FMOD/Resources/FMODStudioCache.asset
Assets/StreamingAssets/*.bank
fmod_editor.log
</code></pre>
<h2 id="fmod-studio"><a class="header" href="#fmod-studio">FMOD Studio</a></h2>
<ul>
<li>FMOD Studio https://www.fmod.com/download#fmodstudio</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th></th><th></th></tr></thead><tbody>
<tr><td>{project}.fspro</td><td><code>F</code>MOD <code>S</code>tudio <code>Pro</code>ject</td></tr>
<tr><td>Asset/</td><td>오디오 파일들</td></tr>
<tr><td>Metadata/</td><td>mofd 설정</td></tr>
<tr><td>Build/</td><td>빌드된 뱅크파일들</td></tr>
<tr><td>.cache/</td><td>ignore</td></tr>
<tr><td>.unsaved/</td><td>ignore</td></tr>
<tr><td>.user/</td><td>ignore. 사용자 설정</td></tr>
</tbody></table>
</div>
<p>.user/Metadata/Asset/{guid}.user.xml =&gt; Metadata/Asset/{guid}.xml</p>
<pre><code>&lt;object class="MasterAssetFolder" id="{guid}"&gt;
	&lt;property name="assetDirectory"&gt;
		&lt;value&gt;../AnotherMasterAsset&lt;/value&gt;
	&lt;/property&gt;
&lt;/object&gt;
</code></pre>
<h2 id="unity-integration"><a class="header" href="#unity-integration">unity Integration</a></h2>
<pre><code class="language-cs">FMODUnity.RuntimeManager.PlayOneShot(strKey, value);

StudioEventEmitter : MonoBehaviour
 
StudioEventEmitter emitter;
emitter.SetParameter(strKey, value);
emitter.EventInstance.setVolume(volume);

// Events에걸 Banks에 끌어다 넣을 수 있다.
// 플레이시 "event:/{banks에서 나온 이름 그대로}"
[SerializableField]
[FMODUnity.EventRef]
private string _eventKey;



EventReference fmodEvent;
EventInstance eventInstance = RuntimeManager.CreateInstance(fmodEvent);      
eventInstance.getDescription(out EventDescription eventDescription;);
eventDescription.getMarkerList(out Marker[] markers);
eventInstance.setTimelinePosition(marker.position);
eventInstance.release();
</code></pre>
<h2 id="scripting"><a class="header" href="#scripting">Scripting</a></h2>
<ul>
<li><a href="https://www.fmod.com/docs/2.00/studio/scripting-terminal-reference.html">https://www.fmod.com/docs/2.00/studio/scripting-terminal-reference.html</a></li>
<li><a href="https://github.com/michaelhartung/fmod-types">https://github.com/michaelhartung/fmod-types</a></li>
</ul>
<h2 id="getting-started-in-fmod"><a class="header" href="#getting-started-in-fmod"><a href="https://www.youtube.com/playlist?list=PLp4vT3ssm5SUgEJpDeA0Nb-1BKGxnDu2m">Getting Started in FMOD</a></a></h2>
<ul>
<li>Episode 1 - FMOD Basics</li>
<li>Episode 2 Part 1 - Events</li>
<li>Episode 2 Part 2 - Sheets</li>
<li>Episode 3 - Instruments
<ul>
<li>타임라인 시트에 Multi Instruments로 렌덤 음악플레이</li>
</ul>
</li>
<li>Episode 4 - Logic Tracks
<ul>
<li>Timeline
<ul>
<li>Tempo</li>
<li>Destination</li>
<li>Loop</li>
<li>Transition
<ul>
<li>컨디션 지정가능</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Episode 5 - Parameters
<ul>
<li>Parameter
<ul>
<li>Continuous (연속)</li>
<li>Discrete (불연속, 이산)
<ul>
<li>상태 변수로 사용함 int</li>
</ul>
</li>
<li>Labbeled
<ul>
<li>상태 변수로 사용함 string</li>
</ul>
</li>
</ul>
</li>
<li>Timeline
<ul>
<li>Sound
<ul>
<li>Cut 하면 타임라인 이동시 재생 중지.</li>
<li>Cut 안하면 타임라인 이동시에도 재생.</li>
</ul>
</li>
</ul>
</li>
<li>Timeline Audio Volume에 우클릭해서 Automation추가 가능
<ul>
<li>밤낮 페이드인아웃효과</li>
</ul>
</li>
<li>Transition Region
<ul>
<li>quantization 양자화 - 템포간격에 맞춤</li>
</ul>
</li>
</ul>
</li>
<li>Episode 6 - Banks</li>
</ul>
<pre><code class="language-cs">// Setting random seed
// ref: https://qa.fmod.com/t/setting-random-seed/11650

FMOD.ADVANCEDSETTINGS advancedsettings = new FMOD.ADVANCEDSETTINGS();
long seed = global::System.DateTime.Now.ToBinary();
advancedsettings.randomSeed = ((uint)seed) ^ ((uint)(seed &gt;&gt; 32));
FMOD.System lowlevel;
ERRCHECK(system.getLowLevelSystem(out lowlevel));
ERRCHECK(lowlevel.setAdvancedSettings(ref advancedsettings));
</code></pre>
<p>snapshot ??</p>
<p>midi =&gt; fmod ???</p>
<p>Volume은 상대적인 크기를 0.0 ~ 1.0 범위로 표현하며, 사용자가 직관적으로 볼륨을 조절할 때 주로 사용됩니다.
Gain은 절대적인 크기 조절을 위한 매개변수로, 주로 데시벨(dB)로 세밀하게 조정됩니다.</p>
<p>Alt + Mouse Wheel 줌 인/아웃
Windows -&gt; Audio Bin Ctrl + 3
Windows -&gt; Preset Browser Ctrl + 8 - Parameters/Effects
Windows -&gt; Sandbox  Ctrl + 7</p>
<ul>
<li>Effect
<ul>
<li>spatializer 공간화 효과
<ul>
<li>Distance Attenuation 거리 감쇠</li>
<li>Min &amp; Max Distance 거리 감쇠 범위</li>
<li>Envelopment
<ul>
<li>Auto</li>
<li>User
<ul>
<li>Sound Size 소리가 들리는 거리</li>
<li>Min Extend 소리를 들을 수 있는 각도</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Event Macros
<ul>
<li>Max Instances 동시 소리 갯수</li>
<li>Stealing
<ul>
<li>Oldest 시간상 가장 이전의 출력된 것(동일 Event)을 정지시키고 새로 발생한 것을 재생</li>
<li>Quietest 거리상 감쇠 효과를 고려하여 가장 작은 음량의 이벤트를 정지하고 새로 발생한 이벤트를 재생</li>
<li>Virtualize Quietest와 동일하나 가상화하여 소리는 안 들릴지라도 Event 동작은 지속</li>
<li>Furthest 직접적인 거리만을 고려하여 가장 작은 음량의 이벤트를 정지하고 새로 발생한 이벤트를 재생</li>
</ul>
</li>
<li>Cooldown 동일 이벤트 무시</li>
<li>Persistent 이벤트 진행 멈춤 방지</li>
<li>Doppler 도플러 효과
<ul>
<li><a href="https://www.youtube.com/watch?v=Be7PNN9G1UM">Bending Sound - Doppler in FMOD</a></li>
<li>Doppler Scale</li>
</ul>
</li>
</ul>
</li>
<li>Output 에 우클릭
<ul>
<li>Mono 하나의 채널로 녹음되어 들리며, 공간감이 없다</li>
<li>Stereo 두 개 이상의 채널로 녹음되어 좌우로 나뉘어 공간감이 있다.</li>
</ul>
</li>
</ul>
<p>lufs Loudness Unit Relative to Full Scale
-24 ~ -20 Lufs</p>
<ul>
<li>
<p>Encoding Format</p>
<ul>
<li>Vorbis - Ogg</li>
<li>PADPCM 압축 형식으로 대략적으로 원본 대비 1/4</li>
<li>PCM 비압축</li>
</ul>
</li>
<li>
<p>Advanced Loading Mode</p>
<ul>
<li>Compressed</li>
<li>Decompressed</li>
<li>Streaming</li>
</ul>
</li>
<li>
<p>Sample Rate Mode</p>
<ul>
<li>Optimized</li>
<li>Pressed</li>
</ul>
</li>
<li>
<p>Sound</p>
<ul>
<li>Async 루프시 끊기더라도 마지막까지 플레이
<ul>
<li>https://www.fmod.com/docs/2.03/studio/working-with-instruments.html#synchronous-and-asynchronous-instruments</li>
</ul>
</li>
<li>Cut Async라도 끊기면 멈추게
<ul>
<li>https://www.fmod.com/docs/2.03/studio/working-with-instruments.html#cut</li>
</ul>
</li>
</ul>
</li>
<li>
<p>AHDSR</p>
<ul>
<li><code>A</code>ttack, <code>H</code>old, <code>D</code>ecay, <code>S</code>ustain, <code>R</code>elease</li>
</ul>
</li>
<li>
<p>LFO</p>
<ul>
<li><code>L</code>ow <code>F</code>requency <code>O</code>scillator</li>
</ul>
</li>
<li>
<p>Built In Parameter</p>
<ul>
<li>Distance</li>
<li>Direction
<ul>
<li>좌 -180   180 우</li>
</ul>
</li>
<li>Elevations
<ul>
<li>하 -90 90 상</li>
</ul>
</li>
<li>Event Cone Angle</li>
<li>Orientation</li>
<li>Speed</li>
</ul>
</li>
</ul>
<p>Sustain Point, Keyoff
Sustain: 지속시키다</p>
<p>Mixer ??</p>
<p>VCA: <code>V</code>oltage <code>C</code>ontrolled <code>A</code>mplifier</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../asset/audio/audio.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../etc/compile-warning.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../asset/audio/audio.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../etc/compile-warning.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
